<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RoxGame | HACKERROX</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: black;
      color: #0f0;
      font-family: 'Share Tech Mono', monospace;
      overflow: hidden;
      text-align: center;
    }
    canvas {
      display: block;
      margin: auto;
      background: #000;
      border: 1px solid #0f0;
    }
    h1 {
      margin: 10px;
      color: #0f0;
      text-shadow: 0 0 10px #0f0;
    }
    .game-screen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #0f0;
      text-shadow: 0 0 10px #0f0;
    }
    .game-screen h2 {
      font-size: 2em;
    }
    .game-screen p {
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <h1>üïπÔ∏è RoxGame: Virus Shooter</h1>
  <canvas id="gameCanvas" width="500" height="600"></canvas>

  <div class="game-screen" id="startScreen">
    <h2>RoxGame: Virus Shooter</h2>
    <p>Press **Spacebar** to Start</p>
  </div>

  <div class="game-screen" id="gameOverScreen" style="display: none;">
    <h2>Game Over</h2>
    <p id="finalScore"></p>
    <p>Press **R** to Restart</p>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let player = { x: 220, y: 550, w: 60, h: 20, speed: 7 };
    let bullets = [];
    let viruses = [];
    let score = 0;
    let gameState = 'start'; // 'start', 'playing', 'gameover'
    let virusSpawnInterval;

    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const finalScoreDisplay = document.getElementById('finalScore');

    function startGame() {
      gameState = 'playing';
      score = 0;
      bullets = [];
      viruses = [];
      player.x = 220;
      startScreen.style.display = 'none';
      gameOverScreen.style.display = 'none';
      
      if (virusSpawnInterval) clearInterval(virusSpawnInterval);
      virusSpawnInterval = setInterval(spawnVirus, 1000);
    }

    function endGame() {
      gameState = 'gameover';
      clearInterval(virusSpawnInterval);
      finalScoreDisplay.textContent = "Final Score: " + score;
      gameOverScreen.style.display = 'block';
    }

    function spawnVirus() {
      let x = Math.random() * (canvas.width - 30);
      viruses.push({ x, y: -30, w: 30, h: 30, speed: 2 + Math.floor(score / 10) * 0.5 }); // Speed increases with score
    }

    function draw() {
      ctx.fillStyle = "black";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      if (gameState === 'playing' || gameState === 'gameover') {
        ctx.fillStyle = "#0f0";
        ctx.fillRect(player.x, player.y, player.w, player.h);

        ctx.fillStyle = "#0f0";
        bullets.forEach(b => ctx.fillRect(b.x, b.y, 5, 10));

        ctx.fillStyle = "red";
        viruses.forEach(v => {
          ctx.beginPath();
          ctx.arc(v.x + v.w / 2, v.y + v.h / 2, v.w / 2, 0, Math.PI * 2);
          ctx.fill();
        });

        ctx.fillStyle = "#0f0";
        ctx.font = "16px Share Tech Mono";
        ctx.fillText("Score: " + score, 10, 20);
      }
    }

    function update() {
      if (gameState !== 'playing') return;

      bullets.forEach((b, i) => {
        b.y -= 5;
        if (b.y < 0) bullets.splice(i, 1);
      });

      viruses.forEach((v, i) => {
        v.y += v.speed;
        if (v.y > canvas.height) {
          viruses.splice(i, 1);
          endGame();
        }
      });

      bullets.forEach((b, bi) => {
        viruses.forEach((v, vi) => {
          if (b.x < v.x + v.w && b.x + 5 > v.x &&
              b.y < v.y + v.h && b.y + 10 > v.y) {
            bullets.splice(bi, 1);
            viruses.splice(vi, 1);
            score++;
          }
        });
      });
    }

    function gameLoop() {
      draw();
      update();
      requestAnimationFrame(gameLoop);
    }
    gameLoop();

    document.addEventListener("keydown", e => {
      if (gameState === 'playing') {
        if (e.key === "ArrowLeft" && player.x > 0) player.x -= player.speed;
        if (e.key === "ArrowRight" && player.x < canvas.width - player.w) player.x += player.speed;
        if (e.key === " ") bullets.push({ x: player.x + player.w / 2, y: player.y });
      } else if (gameState === 'start' && e.key === " ") {
        startGame();
      } else if (gameState === 'gameover' && e.key.toLowerCase() === 'r') {
        startGame();
      }
    });

  </script>
</body>
</html>
